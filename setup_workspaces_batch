#!/bin/bash

# Batch setup script that doesn't require accessibility permissions
# This script creates setup commands for each workspace

BRANCH_NAME="${1:-greg}"

echo "#!/bin/bash"
echo "# Workspace Setup Commands"
echo "# Branch: $BRANCH_NAME"
echo ""

# Function to generate setup commands for a workspace
generate_setup() {
    local workspace_name="$1"
    local project_path="$2"
    
    echo "# Setup for $workspace_name"
    echo "cd $project_path"
    echo "git checkout $BRANCH_NAME 2>/dev/null || git checkout -b $BRANCH_NAME"
    echo "git pull origin $BRANCH_NAME 2>/dev/null || git pull"
    echo ""
    echo "# Update index.html title"
    echo "if [ -f index.html ]; then"
    echo "    sed -i '' 's|<title>.*</title>|<title>$workspace_name</title>|' index.html"
    echo "    echo '✓ Updated index.html title to: $workspace_name'"
    echo "else"
    echo "    echo '⚠ No index.html found in $project_path'"
    echo "fi"
    echo ""
    echo "echo '✓ Workspace $workspace_name setup complete'"
    echo "echo '---'"
    echo ""
}

# Get list of Terminal windows
echo "# Run ./list_terminals first to see available windows"
echo "# Then customize the commands below for your workspaces:"
echo ""

# Example workspace setups
echo "# Example workspaces (customize these):"
generate_setup "quick" "/Users/gregorywhiteside/Projects/QUICK"
generate_setup "bugs" "/Users/gregorywhiteside/Projects/BUGS"
generate_setup "roadmap" "/Users/gregorywhiteside/Projects/MEDIUM"

echo "# To use this script:"
echo "# 1. Run: ./setup_workspaces_batch > setup_all.sh"
echo "# 2. Edit setup_all.sh to match your actual workspaces"
echo "# 3. Run in each Terminal window: bash setup_all.sh"